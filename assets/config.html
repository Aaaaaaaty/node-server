<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>完美接口检测配置</title>
	<!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
	<link rel="stylesheet" href="http://apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.css">
	<link rel="stylesheet" href="./css/config.css">
</head>
<body>
	<div class="wrapper">
		<div class="page-header">
		    <h3>完美接口检测配置</h3>
		</div>
		<form id="form">
			<div class="point">
				<div class="form-group">
					<label for="exampleInputEmail1">目标地址</label>
					<input type="url" class="form-control" id="url" placeholder="Example: https://www.douban.com" name="captureUrl">
				</div>
			</div>
		</form>
		<button id="submitBtn" type="submit" class="btn btn-default">提交</button>
		<div class="page-header">
		    <h5>提交结果</h5>
		    <p id="result"></p>
		</div>
		<img id="resultImg" src="" alt="" class="img-rounded">
	</div>
	<div class="progressBg"><div>提交配置文件...</div></div>
	<div class="progress">
	    <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 100%"></div>
	</div>
	<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
	<script>
		$(document).ready(function() {
			var submitBtn = $('#submitBtn'),
				resultImg = $('#resultImg'),
				result = $('#result'),
				diffImg = $('#diffImg'),
				progress = $('.progress'),
				bg = $('.progressBg'),
				url = $('#url'),
				selector = $('#selector'),
				file = $('#file'),
				form
			submitBtn.on('click', ajaxForm)
			function ajaxForm() {
				if(url.val()) {
					form = new FormData(document.getElementById("form"))
					$.ajax({
		                url:"/api/uploadConfig",
		                type:"post",
		                port: 9090,
		                data:form,
		                processData:false,
		                contentType:false,
		                beforeSend:function() {
		                	progress.show()
		                	bg.show()
		                },
		                success:function(data){
		                	result.html(data.msg)
		                },
		                complete: function() {
		                	progress.hide()
		                	bg.hide()
		                },
		                error:function(e){
		                	console.log('e', e)
		                }
		            })
				} else {
					alert('请填写完整信息！')
				}
				
			}
		})
	</script>
	
</body>
</html>